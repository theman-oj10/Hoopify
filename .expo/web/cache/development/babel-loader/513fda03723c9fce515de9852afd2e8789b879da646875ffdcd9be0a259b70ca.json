{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport KeyboardAvoidingView from \"react-native-web/dist/exports/KeyboardAvoidingView\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport React, { useEffect, useState } from 'react';\nimport { auth, storage } from \"../../firebase\";\nimport { useNavigation } from '@react-navigation/native';\nimport * as DocumentPicker from 'expo-document-picker';\nimport Logo from \"./Images/Logo.png\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar HomePage = function HomePage() {\n  var _auth$currentUser2;\n  var navigation = useNavigation();\n  var _useState = useState(0),\n    _useState2 = _slicedToArray(_useState, 2),\n    uploadProgress = _useState2[0],\n    setUploadProgress = _useState2[1];\n  var handleSignOut = function handleSignOut() {\n    auth.signOut().then(function () {\n      navigation.replace('Sign-In');\n    }).catch(function (error) {\n      return alert(error.message);\n    });\n  };\n  var handleVideoUpload = function () {\n    var _ref = _asyncToGenerator(function* () {\n      try {\n        var _yield$DocumentPicker = yield DocumentPicker.getDocumentAsync({\n            type: 'video/*',\n            copyToCacheDirectory: true\n          }),\n          type = _yield$DocumentPicker.type,\n          uri = _yield$DocumentPicker.uri;\n        if (type === 'success') {\n          var _auth$currentUser;\n          var response = yield fetch(uri);\n          var blob = yield response.blob();\n          var userId = (_auth$currentUser = auth.currentUser) == null ? void 0 : _auth$currentUser.uid;\n          var filename = \"videos/\" + userId + \"/\" + Date.now();\n          var storageRef = storage.ref().child(filename);\n          var uploadTask = storageRef.put(blob);\n          uploadTask.on('state_changed', function (snapshot) {\n            var progress = snapshot.bytesTransferred / snapshot.totalBytes * 100;\n            setUploadProgress(progress);\n          }, function (error) {\n            console.log('Video upload error:', error);\n            setUploadProgress(0);\n          }, _asyncToGenerator(function* () {\n            var downloadUrl = yield uploadTask.snapshot.ref.getDownloadURL();\n            console.log('Video uploaded successfully. Download URL:', downloadUrl);\n            setUploadProgress(0);\n          }));\n        }\n      } catch (error) {\n        console.log('Error selecting video:', error);\n      }\n    });\n    return function handleVideoUpload() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  return _jsx(KeyboardAvoidingView, {\n    style: styles.root,\n    behavior: \"padding\",\n    children: _jsxs(View, {\n      style: styles.container,\n      children: [_jsx(Image, {\n        source: Logo,\n        style: styles.logo,\n        resizeMode: \"contain\"\n      }), _jsx(Text, {\n        style: styles.title,\n        children: \"Hoopify\"\n      }), _jsxs(Text, {\n        style: styles.email,\n        children: [\"Email: \", (_auth$currentUser2 = auth.currentUser) == null ? void 0 : _auth$currentUser2.email]\n      }), _jsx(TouchableOpacity, {\n        style: styles.button,\n        onPress: handleVideoUpload,\n        children: _jsx(Text, {\n          style: styles.buttonText,\n          children: \"Upload Video\"\n        })\n      }), uploadProgress > 0 && _jsxs(Text, {\n        style: styles.uploadProgress,\n        children: [\"Upload Progress: \", Math.round(uploadProgress), \"%\"]\n      }), _jsx(TouchableOpacity, {\n        style: styles.button,\n        onPress: handleSignOut,\n        children: _jsx(Text, {\n          style: styles.buttonText,\n          children: \"Sign out\"\n        })\n      })]\n    })\n  });\n};\nvar styles = StyleSheet.create({\n  root: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 20,\n    backgroundColor: 'pink'\n  },\n  container: {\n    alignItems: 'center'\n  },\n  logo: {\n    width: '70%',\n    height: 200,\n    borderRadius: 10,\n    marginBottom: 40\n  },\n  title: {\n    fontSize: 60,\n    fontWeight: 'bold',\n    marginTop: 10,\n    marginBottom: 10\n  },\n  email: {\n    fontSize: 16,\n    marginBottom: 10\n  },\n  button: {\n    backgroundColor: 'blue',\n    width: '60%',\n    padding: 10,\n    borderRadius: 10,\n    alignItems: 'center',\n    marginTop: 10\n  },\n  buttonText: {\n    color: 'white',\n    fontSize: 16\n  },\n  uploadProgress: {\n    marginTop: 10\n  }\n});\nexport default HomePage;","map":{"version":3,"names":["React","useEffect","useState","auth","storage","useNavigation","DocumentPicker","Logo","jsx","_jsx","jsxs","_jsxs","HomePage","_auth$currentUser2","navigation","_useState","_useState2","_slicedToArray","uploadProgress","setUploadProgress","handleSignOut","signOut","then","replace","catch","error","alert","message","handleVideoUpload","_ref","_asyncToGenerator","_yield$DocumentPicker","getDocumentAsync","type","copyToCacheDirectory","uri","_auth$currentUser","response","fetch","blob","userId","currentUser","uid","filename","Date","now","storageRef","ref","child","uploadTask","put","on","snapshot","progress","bytesTransferred","totalBytes","console","log","downloadUrl","getDownloadURL","apply","arguments","KeyboardAvoidingView","style","styles","root","behavior","children","View","container","Image","source","logo","resizeMode","Text","title","email","TouchableOpacity","button","onPress","buttonText","Math","round","StyleSheet","create","flex","justifyContent","alignItems","padding","backgroundColor","width","height","borderRadius","marginBottom","fontSize","fontWeight","marginTop","color"],"sources":["C:/Users/Adarsh/Desktop/android-test/Screens/HomePage/HomePage.js"],"sourcesContent":["import { View, Text, Image, StyleSheet, TextInput, KeyboardAvoidingView, ScrollView, TouchableOpacity } from 'react-native';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { auth, storage } from '../../firebase'\r\nimport { useNavigation } from '@react-navigation/native'\r\nimport * as DocumentPicker from 'expo-document-picker';\r\nimport Logo from './Images/Logo.png';\r\n\r\nconst HomePage = () => {\r\n    const navigation = useNavigation();\r\n    const [uploadProgress, setUploadProgress] = useState(0);\r\n  \r\n    const handleSignOut = () => {\r\n      auth\r\n        .signOut()\r\n        .then(() => {\r\n          navigation.replace('Sign-In');\r\n        })\r\n        .catch(error => alert(error.message));\r\n    };\r\n  \r\n    const handleVideoUpload = async () => {\r\n      try {\r\n        const { type, uri } = await DocumentPicker.getDocumentAsync({ type: 'video/*', copyToCacheDirectory: true });\r\n  \r\n        if (type === 'success') {\r\n          const response = await fetch(uri);\r\n          const blob = await response.blob();\r\n          const userId = auth.currentUser?.uid;\r\n          const filename = `videos/${userId}/${Date.now()}`;\r\n  \r\n          const storageRef = storage.ref().child(filename);\r\n          const uploadTask = storageRef.put(blob);\r\n  \r\n          uploadTask.on(\r\n            'state_changed',\r\n            snapshot => {\r\n              const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n              setUploadProgress(progress);\r\n            },\r\n            error => {\r\n              console.log('Video upload error:', error);\r\n              setUploadProgress(0);\r\n            },\r\n            async () => {\r\n              const downloadUrl = await uploadTask.snapshot.ref.getDownloadURL();\r\n              console.log('Video uploaded successfully. Download URL:', downloadUrl);\r\n              setUploadProgress(0);\r\n            }\r\n          );\r\n        }\r\n      } catch (error) {\r\n        console.log('Error selecting video:', error);\r\n      }\r\n    };\r\n  \r\n    return (\r\n        <KeyboardAvoidingView style={styles.root} behavior=\"padding\">\r\n          <View style={styles.container}>\r\n            <Image source={Logo} style={styles.logo} resizeMode=\"contain\" />\r\n            <Text style={styles.title}>Hoopify</Text>\r\n            <Text style={styles.email}>Email: {auth.currentUser?.email}</Text>\r\n            <TouchableOpacity style={styles.button} onPress={handleVideoUpload}>\r\n              <Text style={styles.buttonText}>Upload Video</Text>\r\n            </TouchableOpacity>\r\n            {uploadProgress > 0 && (\r\n              <Text style={styles.uploadProgress}>\r\n                Upload Progress: {Math.round(uploadProgress)}%\r\n              </Text>\r\n            )}\r\n            <TouchableOpacity style={styles.button} onPress={handleSignOut}>\r\n              <Text style={styles.buttonText}>Sign out</Text>\r\n            </TouchableOpacity>\r\n          </View>\r\n        </KeyboardAvoidingView>\r\n      );\r\n    };\r\n    \r\n    const styles = StyleSheet.create({\r\n      root: {\r\n        flex: 1,\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        padding: 20,\r\n        backgroundColor: 'pink',\r\n      },\r\n      container: {\r\n        alignItems: 'center',\r\n      },\r\n      logo: {\r\n        width: '70%',\r\n        height: 200,\r\n        borderRadius: 10,\r\n        marginBottom: 40,\r\n      },\r\n      title: {\r\n        fontSize: 60,\r\n        fontWeight: 'bold',\r\n        marginTop: 10,\r\n        marginBottom: 10,\r\n      },\r\n      email: {\r\n        fontSize: 16,\r\n        marginBottom: 10,\r\n      },\r\n      button: {\r\n        backgroundColor: 'blue',\r\n        width: '60%',\r\n        padding: 10,\r\n        borderRadius: 10,\r\n        alignItems: 'center',\r\n        marginTop: 10,\r\n      },\r\n      buttonText: {\r\n        color: 'white',\r\n        fontSize: 16,\r\n      },\r\n      uploadProgress: {\r\n        marginTop: 10,\r\n      },\r\n    });\r\n    \r\n    export default HomePage;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}